# Copyright Suunto Oy 2015-2016
# All rights reserved.

swagger: '2.0'

# Document metadata
info:
  version: "0.9.0"
  title: /Augmented/Heartrate API
  description: |
    This file defines /Augmented/Heartrate API.
  termsOfService: http://suunto.com/wbapi/terms/
  contact:
    name: Suunto team
    url: http://developer.suunto.com
  
# Security definitions
security:
  - suuntoAccessCode:
    - public

securityDefinitions:
  suuntoAccessCode:
    type: oauth2
    scopes:
      public: Grants read/write access to public resources.
    flow: accessCode
    authorizationUrl: https://suunto.com/wbapi/login/oauth/authorize
    tokenUrl: https://suunto.com/wbapi/login/oauth/access_token
   
# Paths
paths:

  /Augmented/HeartRate/Average:
    x-executionContext: meas
    get:
      description: Get the latest augmented heart rate value.
      responses:
        200:
          description: Operation completed successfully.
          schema:
            $ref: 'http://localhost:9000/suunto_fusion_heartrate.yaml#/definitions/HeartRateData'
        204:
          description: No valid data available.
      security:
        - suuntoAccessCode:
          - public

  /Augmented/HeartRate/Average/Subscription:
    x-executionContext: meas
    post:
      description: Subscribe the client to receive augmented heart rate event notifications.
      responses:
        200:
          description: Operation completed successfully.
        x-std-errors:
          description: See common error codes http://developer.suunto.com/api/std-errors#subscribe
        x-notification:
          description: Event notification.
          schema:
            $ref: 'http://localhost:9000/suunto_fusion_heartrate.yaml#/definitions/HeartRateData'
      security:
        - suuntoAccessCode:
          - public
    delete:
      description: Unsubscribe the client from all average heart rate event notifications.
      responses:
        200:
          description: Operation completed successfully.
        x-std-errors:
          description: See common error codes http://developer.suunto.com/api/std-errors#unsubscribe
      security:
        - suuntoAccessCode:
          - public

  /Augmented/HeartRate/State:
    x-executionContext: meas
    get:
      description: Get the current augmentation heartrate state.
      responses:
        200:
          description: Operation completed successfully.
          schema:
            $ref: '#/definitions/AugmentationState'
        204:
          description: No valid data available.
      security:
        - suuntoAccessCode:
          - public

  /Augmented/HeartRate/State/Subscription:
    x-executionContext: meas
    post:
      description: Subscribe the client to receive augmented heart rate event notifications.
      responses:
        200:
          description: Operation completed successfully.
        x-std-errors:
          description: See common error codes http://developer.suunto.com/api/std-errors#subscribe
        x-notification:
          description: Event notification.
          schema:
            $ref: '#/definitions/AugmentationState'
      security:
        - suuntoAccessCode:
          - public
    delete:
      description: Unsubscribe the client from all average heart rate event notifications.
      responses:
        200:
          description: Operation completed successfully.
        x-std-errors:
          description: See common error codes http://developer.suunto.com/api/std-errors#unsubscribe
      security:
        - suuntoAccessCode:
          - public

definitions:
  AugmentationState:
    type: integer
    format: uint8
    description: Current state of the augmented heart rate.
    enum:
      - name: NOT_CALIBRATED
        value: 0
      - name: CALIBRATING
        value: 1
      - name: AUGMENTING
        value: 2
      - name: CALIBRATION_FAILED
        value: 3

